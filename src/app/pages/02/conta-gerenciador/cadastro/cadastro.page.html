<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-title>Cadastre-se</ion-title>
    <ion-buttons slot="start">
      <ion-back-button defaultHref="pessoas"></ion-back-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">
  <form [formGroup]="cadastro" (ngSubmit)="enviar()">
    <ion-item>
      <ion-label position="floating">Nome</ion-label>
      <ion-input type="text" formControlName="nome" id="nome"></ion-input>
    </ion-item>
    <ion-item>
      <ion-label position="floating">Email</ion-label>
      <ion-input type="email" formControlName="email" id="email" minlength="3"></ion-input>
      <div class="form-text text-danger">
        <div *ngIf="cadastro.get('email').invalid && (cadastro.get('email').dirty || cadastro.get('email').touched)">
          <small *ngIf="cadastro.get('email').errors.required">
            Insira um email válido.
          </small>
        </div>
        <div class="form-text text-danger" *ngIf="verificarUsuario()">
          <small>
            Email já cadastrado.
          </small>
        </div>
      </div>
    </ion-item>
    <ion-item>
      <ion-label position="floating">Senha</ion-label>
      <ion-input type="password" formControlName="senha" id="senha"></ion-input>
    </ion-item>
    <ion-button type="submit" expand="block" color="primary" [disabled]="!cadastro.valid">Salvar</ion-button>
  </form>
</ion-content>